<!DOCTYPE html>
<html ng-app="demo">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>MFEM</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="angular-route.js"></script>
    <script src="app.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="RadarChart.js"></script>
    <link rel="stylesheet" href="chart_layout.css">
</head>
<body>
<div id="example1">
<div ng-controller="Controller">
    <div ng-init="getCats();getResult()">
        <h1>Microservice Framework Evaluation Method</h1>
        <div id="radar">
            <div id="chart"></div>
        </div>
        <button class="myButton" onclick="window.close()" style="vertical-align:middle"><span>Zur√ºck</span></button>

        <script>
            //Diagramm
            var w = 500,
                h = 500;
            var colorscale = d3.scale.category10();
            var a = [0.1,0.2,0.3,0.4];
            //Legend titles
            var results = [];
            var resultE = '{{resultEva}}';
            for (var i = 0; i < resultE.length; i++) {
                results.push(Number(resultE[i]))
            }
            var LegendOptions = ['{{framework}}',typeof results[0],typeof a[0]];
            //Data
            var d = [
                [
                    {axis:"{{catego[0].category}}",value:a[0]},
                    {axis:"{{catego[1].category}}",value:results[0]},
                    {axis:"{{catego[2].category}}",value:0.42},
                    {axis:"{{catego[3].category}}",value:0.34},
                    {axis:"{{catego[4].category}}",value:0.48},
                    {axis:"{{catego[5].category}}",value:0.14}
                ]
            ];
            //Options for the Radar chart, other than default
            var mycfg = {
                w: w,
                h: h,
                maxValue: 1.0,
                levels: 10,
                ExtraWidthX: 300
            };
            //Call function to draw the Radar chart
            //Will expect that data is in %'s
            RadarChart.draw("#chart", d, mycfg);
            //Legende
            var svg = d3.select('#radar')
                .selectAll('svg')
                .append('svg')
                .attr("width", w+300)
                .attr("height", h);
            //Create the title for the legend
            var text = svg.append("text")
                .attr("class", "title")
                .attr('transform', 'translate(90,0)')
                .attr("x", w - 70)
                .attr("y", 10)
                .attr("font-size", "12px")
                .attr("fill", "#000000")
                .text("Framework");
            //Initiate Legend
            var legend = svg.append("g")
                .attr("class", "legend")
                .attr("height", 100)
                .attr("width", 200)
                .attr('transform', 'translate(90,20)')
            ;
            //Create colour squares
            legend.selectAll('rect')
                .data(LegendOptions)
                .enter()
                .append("rect")
                .attr("x", w - 65)
                .attr("y", function(d, i){ return i * 20;})
                .attr("width", 10)
                .attr("height", 10)
                .style("fill", function(d, i){ return colorscale(i);})
            ;
            //Create text next to squares
            legend.selectAll('text')
                .data(LegendOptions)
                .enter()
                .append("text")
                .attr("x", w - 52)
                .attr("y", function(d, i){ return i * 20 + 9;})
                .attr("font-size", "11px")
                .attr("fill", "#404040")
                .text(function(d) { return d; })
            ;
        </script>
    </div>
</div>
</div>
</body>
</html>